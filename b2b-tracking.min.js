/**
 * C2C B2B Tracking v1.0.0 | city2city.ru | Counter: 36995060
 */
!function(){"use strict";var e={counterId:36995060,debug:!1,page:"/dlya-biznesa"};function t(t,n){if("undefined"==typeof ym)return void(e.debug&&console.warn("[C2C] ym not found"));e.debug&&console.log("[C2C] Goal:",t,n||""),ym(e.counterId,"reachGoal",t,n||{})}function n(e,t,n){document.addEventListener(t,function(t){for(var o=t.target;o&&o!==document;){if(o.matches&&o.matches(e))return void n(t,o);o=o.parentNode}})}function o(t,n,o){var r=document.querySelector(t);r&&("IntersectionObserver"in window?new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(n(e.target),this.unobserve(e.target))}.bind(this))},o||{threshold:.5}).observe(r):n(r))}var r=window.location.pathname;if(r===e.page||r===e.page+"/"||0===r.indexOf(e.page)){function i(){document.querySelectorAll("form").forEach(function(e){e.addEventListener("submit",function(){t("b2b_form_submit",{form_location:"page"})})}),window.c2cTrackFormSubmit=function(e){t("b2b_form_submit",{form_location:e||"ajax"})},n("button, a.button, [role=button]","click",function(e,n){var o=(n.textContent||n.innerText||"").trim().toLowerCase();-1===o.indexOf("получить предложение")&&-1===o.indexOf("получить расчёт")&&-1===o.indexOf("получить расчет")||t("b2b_cta_offer",{button_text:o}),-1!==o.indexOf("рассчитать свой маршрут")&&t("b2b_calc_route")}),n("button","click",function(e,n){if("рассчитать"===(n.textContent||n.innerText||"").trim().toLowerCase()){var o=document.querySelector('input[placeholder*="откуда"], input[placeholder*="Откуда"], input[name*="from"]'),r=document.querySelector('input[placeholder*="куда"], input[placeholder*="Куда"], input[name*="to"]');t("b2b_calc_used",{from:o?o.value:"",to:r?r.value:""})}}),n('a[href^="tel:"]',"click",function(e,n){t("b2b_phone_click",{phone:n.href.replace("tel:","")})}),n('a[href^="mailto:"]',"click",function(e,n){t("b2b_email_click",{email:n.href.replace("mailto:","").split("?")[0]})}),n('a[href*="t.me"], a[href*="telegram"]',"click",function(){t("b2b_telegram_click"),t("b2b_messenger_click",{messenger:"telegram"})}),n('a[href*="wa.me"], a[href*="whatsapp"]',"click",function(){t("b2b_whatsapp_click"),t("b2b_messenger_click",{messenger:"whatsapp"})}),n('a[href*="vk.me"], a[href*="max.ru"]',"click",function(){t("b2b_messenger_click",{messenger:"vk"})});var r={};n('button, [role="button"], summary, .faq-item, .accordion-header',"click",function(e,n){var o=(n.textContent||n.innerText||"").trim();if(-1!==o.indexOf("?")&&o.length>15&&o.length<200){var i=o.substring(0,30);r[i]||(r[i]=!0,t("b2b_faq_opened",{question:o.substring(0,50)}))}}),o("form, .contact-form, #contact-form",function(){t("b2b_scroll_form")},{threshold:.3}),e.debug&&console.log("[C2C] Ready")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),window.c2cTracking={sendGoal:t,debug:function(t){e.debug=!1!==t,console.log("[C2C] Debug:",e.debug?"ON":"OFF")}}}}();
